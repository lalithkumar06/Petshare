{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Grid,Card,CardContent,CardMedia,Typography,Button,Box,TextField,MenuItem}from'@mui/material';import{pets,adoptions}from'../utils/api';import{useAuth}from'../contexts/AuthContext';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PetList=()=>{const[petList,setPetList]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{fetchPets();},[]);const fetchPets=async()=>{try{// Exclude the current user's own pets from browse list when logged in\nconst url=user?\"/pets?excludeMine=true\":'/pets';const{data}=await pets.getAll(url);setPetList(data);}catch(error){toast.error('Failed to fetch pets');}finally{setLoading(false);}};const handleAdopt=async petId=>{try{await adoptions.create(petId);toast.success('Adoption request sent!');fetchPets();}catch(error){toast.error('Failed to send adoption request');}};const filteredPets=petList.filter(pet=>{if(filter==='all')return true;return pet.type===filter;});if(loading){return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Box,{sx:{my:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Available Pets\"}),/*#__PURE__*/_jsxs(TextField,{select:true,label:\"Filter by type\",value:filter,onChange:e=>setFilter(e.target.value),sx:{mb:3,minWidth:200},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"dog\",children:\"Dogs\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"cat\",children:\"Cats\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"bird\",children:\"Birds\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"other\",children:\"Other\"})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:filteredPets.map(pet=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:pet.imageUrl,alt:pet.name}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:pet.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[pet.breed,\" \\u2022 \",pet.age,\" years old\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mt:1},children:[pet.description.substring(0,100),\"...\"]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",fullWidth:true,onClick:()=>navigate(\"/pets/\".concat(pet._id)),children:\"View Details\"}),user&&pet.status==='available'&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:()=>handleAdopt(pet._id),children:\"Adopt\"})]}),pet.status!=='available'&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:2,textAlign:'center'},children:pet.status==='pending'?'Pending Adoption':'Adopted'})]})]})},pet._id))})]})});};export default PetList;","map":{"version":3,"names":["React","useState","useEffect","Container","Grid","Card","CardContent","CardMedia","Typography","Button","Box","TextField","MenuItem","pets","adoptions","useAuth","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","PetList","petList","setPetList","loading","setLoading","filter","setFilter","user","navigate","fetchPets","url","data","getAll","error","handleAdopt","petId","create","success","filteredPets","pet","type","children","sx","my","variant","component","gutterBottom","select","label","value","onChange","e","target","mb","minWidth","container","spacing","map","item","xs","sm","md","height","image","imageUrl","alt","name","color","breed","age","mt","description","substring","display","gap","fullWidth","onClick","concat","_id","status","textAlign"],"sources":["C:/Users/DELL/Desktop/project/client/src/pages/PetList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  TextField,\r\n  MenuItem,\r\n} from '@mui/material';\r\nimport { pets, adoptions } from '../utils/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { toast } from 'react-toastify';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst PetList = () => {\r\n  const [petList, setPetList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchPets();\r\n  }, []);\r\n\r\n  const fetchPets = async () => {\r\n    try {\r\n      // Exclude the current user's own pets from browse list when logged in\r\n      const url = user ? `/pets?excludeMine=true` : '/pets';\r\n      const { data } = await pets.getAll(url);\r\n      setPetList(data);\r\n    } catch (error) {\r\n      toast.error('Failed to fetch pets');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAdopt = async (petId) => {\r\n    try {\r\n      await adoptions.create(petId);\r\n      toast.success('Adoption request sent!');\r\n      fetchPets();\r\n    } catch (error) {\r\n      toast.error('Failed to send adoption request');\r\n    }\r\n  };\r\n\r\n  const filteredPets = petList.filter((pet) => {\r\n    if (filter === 'all') return true;\r\n    return pet.type === filter;\r\n  });\r\n\r\n  if (loading) {\r\n    return <Typography>Loading...</Typography>;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Box sx={{ my: 4 }}>\r\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n          Available Pets\r\n        </Typography>\r\n        <TextField\r\n          select\r\n          label=\"Filter by type\"\r\n          value={filter}\r\n          onChange={(e) => setFilter(e.target.value)}\r\n          sx={{ mb: 3, minWidth: 200 }}\r\n        >\r\n          <MenuItem value=\"all\">All</MenuItem>\r\n          <MenuItem value=\"dog\">Dogs</MenuItem>\r\n          <MenuItem value=\"cat\">Cats</MenuItem>\r\n          <MenuItem value=\"bird\">Birds</MenuItem>\r\n          <MenuItem value=\"other\">Other</MenuItem>\r\n        </TextField>\r\n        <Grid container spacing={3}>\r\n          {filteredPets.map((pet) => (\r\n            <Grid item xs={12} sm={6} md={4} key={pet._id}>\r\n              <Card>\r\n                <CardMedia\r\n                  component=\"img\"\r\n                  height=\"200\"\r\n                  image={pet.imageUrl}\r\n                  alt={pet.name}\r\n                />\r\n                <CardContent>\r\n                  <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                    {pet.name}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {pet.breed} â€¢ {pet.age} years old\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                    {pet.description.substring(0, 100)}...\r\n                  </Typography>\r\n                  <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      onClick={() => navigate(`/pets/${pet._id}`)}\r\n                    >\r\n                      View Details\r\n                    </Button>\r\n                    {user && pet.status === 'available' && (\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        fullWidth\r\n                        onClick={() => handleAdopt(pet._id)}\r\n                      >\r\n                        Adopt\r\n                      </Button>\r\n                    )}\r\n                  </Box>\r\n                  {pet.status !== 'available' && (\r\n                    <Typography\r\n                      variant=\"body2\"\r\n                      color=\"text.secondary\"\r\n                      sx={{ mt: 2, textAlign: 'center' }}\r\n                    >\r\n                      {pet.status === 'pending' ? 'Pending Adoption' : 'Adopted'}\r\n                    </Typography>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PetList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}