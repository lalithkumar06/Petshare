{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{Container,Typography,Grid,Card,CardMedia,CardContent,Button,Box}from'@mui/material';import{pets}from'../utils/api';import{useAuth}from'../contexts/AuthContext';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyPets=()=>{const{user}=useAuth();const[myPets,setMyPets]=useState([]);const fetchMyPets=useCallback(async()=>{try{if(!user)return setMyPets([]);const{data}=await pets.getMine();setMyPets(data);}catch(err){toast.error('Failed to fetch your pets');}},[user]);useEffect(()=>{fetchMyPets();},[fetchMyPets]);const handleDelete=async id=>{try{await pets.delete(id);toast.success('Pet deleted');fetchMyPets();}catch(err){toast.error('Failed to delete pet');}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Box,{sx:{my:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"My Pets\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,sx:{mt:2},children:myPets.map(pet=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"180\",image:pet.imageUrl,alt:pet.name,onError:e=>{e.target.onerror=null;e.target.src='https://via.placeholder.com/400x200?text=No+Image';}}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:pet.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[pet.breed,\" \\u2022 \",pet.age,\" years\"]}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",onClick:()=>handleDelete(pet._id),children:\"Delete\"})})]})]})},pet._id))})]})});};export default MyPets;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Container","Typography","Grid","Card","CardMedia","CardContent","Button","Box","pets","useAuth","toast","jsx","_jsx","jsxs","_jsxs","MyPets","user","myPets","setMyPets","fetchMyPets","data","getMine","err","error","handleDelete","id","delete","success","children","sx","my","variant","container","spacing","mt","map","pet","item","xs","sm","md","component","height","image","imageUrl","alt","name","onError","e","target","onerror","src","breed","age","color","onClick","_id"],"sources":["C:/Users/DELL/Desktop/project/client/src/pages/MyPets.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { Container, Typography, Grid, Card, CardMedia, CardContent, Button, Box } from '@mui/material';\r\nimport { pets } from '../utils/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst MyPets = () => {\r\n  const { user } = useAuth();\r\n  const [myPets, setMyPets] = useState([]);\r\n\r\n  const fetchMyPets = useCallback(async () => {\r\n    try {\r\n      if (!user) return setMyPets([]);\r\n      const { data } = await pets.getMine();\r\n      setMyPets(data);\r\n    } catch (err) {\r\n      toast.error('Failed to fetch your pets');\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    fetchMyPets();\r\n  }, [fetchMyPets]);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await pets.delete(id);\r\n      toast.success('Pet deleted');\r\n      fetchMyPets();\r\n    } catch (err) {\r\n      toast.error('Failed to delete pet');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Box sx={{ my: 4 }}>\r\n        <Typography variant=\"h4\">My Pets</Typography>\r\n        <Grid container spacing={3} sx={{ mt: 2 }}>\r\n          {myPets.map(pet => (\r\n            <Grid item xs={12} sm={6} md={4} key={pet._id}>\r\n              <Card>\r\n                <CardMedia component=\"img\" height=\"180\" image={pet.imageUrl} alt={pet.name} onError={e => { e.target.onerror = null; e.target.src = 'https://via.placeholder.com/400x200?text=No+Image'; }} />\r\n                <CardContent>\r\n                  <Typography variant=\"h6\">{pet.name}</Typography>\r\n                  <Typography variant=\"body2\">{pet.breed} â€¢ {pet.age} years</Typography>\r\n                  <Box sx={{ mt: 2 }}>\r\n                    <Button variant=\"outlined\" color=\"error\" onClick={() => handleDelete(pet._id)}>Delete</Button>\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default MyPets;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}