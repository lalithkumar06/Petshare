{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Container,Paper,Typography,Grid,Card,CardMedia,Button,Box,Divider,Chip}from'@mui/material';import{useParams,useNavigate}from'react-router-dom';import{pets}from'../utils/api';import{useAuth}from'../contexts/AuthContext';import{toast}from'react-toastify';import EmailIcon from'@mui/icons-material/Email';import PetsIcon from'@mui/icons-material/Pets';import CalendarTodayIcon from'@mui/icons-material/CalendarToday';import PersonIcon from'@mui/icons-material/Person';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PetDetails=()=>{const[pet,setPet]=useState(null);const[loading,setLoading]=useState(true);const{id}=useParams();const{user}=useAuth();const navigate=useNavigate();const fetchPetDetails=useCallback(async()=>{try{const{data}=await pets.getOne(id);setPet(data);}catch(error){toast.error('Failed to fetch pet details');navigate('/pets');}finally{setLoading(false);}},[id,navigate]);useEffect(()=>{fetchPetDetails();},[fetchPetDetails]);const handleAdopt=async()=>{try{await pets.update(id,{status:'pending'});toast.success('Adoption request sent!');fetchPetDetails();}catch(error){toast.error('Failed to send adoption request');}};if(loading){return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});}if(!pet){return/*#__PURE__*/_jsx(Typography,{children:\"Pet not found\"});}const statusColor={available:'success',pending:'warning',adopted:'error'};return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",sx:{py:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"400\",image:pet.imageUrl,alt:pet.name,sx:{objectFit:'cover'}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:pet.name}),/*#__PURE__*/_jsx(Chip,{label:pet.status.charAt(0).toUpperCase()+pet.status.slice(1),color:statusColor[pet.status]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(PetsIcon,{sx:{mr:1},color:\"primary\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[pet.breed,\" \\u2022 \",pet.type.charAt(0).toUpperCase()+pet.type.slice(1)]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(CalendarTodayIcon,{sx:{mr:1},color:\"primary\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[pet.age,\" years old\"]})]})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mt:3,mb:3},children:pet.description}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Contact Information\"}),/*#__PURE__*/_jsxs(Box,{sx:{bgcolor:'background.default',p:2,borderRadius:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(PersonIcon,{sx:{mr:1},color:\"primary\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Posted by: \",pet.owner.username]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(EmailIcon,{sx:{mr:1},color:\"primary\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Contact: \",pet.owner.email]})]})]}),user&&pet.status==='available'&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,size:\"large\",sx:{mt:3},onClick:handleAdopt,children:\"Request to Adopt\"})]})})]})});};export default PetDetails;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Paper","Typography","Grid","Card","CardMedia","Button","Box","Divider","Chip","useParams","useNavigate","pets","useAuth","toast","EmailIcon","PetsIcon","CalendarTodayIcon","PersonIcon","jsx","_jsx","jsxs","_jsxs","PetDetails","pet","setPet","loading","setLoading","id","user","navigate","fetchPetDetails","data","getOne","error","handleAdopt","update","status","success","children","statusColor","available","pending","adopted","maxWidth","sx","py","container","spacing","item","xs","md","component","height","image","imageUrl","alt","name","objectFit","p","display","justifyContent","alignItems","mb","variant","label","charAt","toUpperCase","slice","color","my","mr","breed","type","age","mt","description","gutterBottom","bgcolor","borderRadius","owner","username","email","fullWidth","size","onClick"],"sources":["C:/Users/DELL/Desktop/project/client/src/pages/PetDetails.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Grid,\r\n  Card,\r\n  CardMedia,\r\n  Button,\r\n  Box,\r\n  Divider,\r\n  Chip,\r\n} from '@mui/material';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { pets } from '../utils/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { toast } from 'react-toastify';\r\nimport EmailIcon from '@mui/icons-material/Email';\r\nimport PetsIcon from '@mui/icons-material/Pets';\r\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\n\r\nconst PetDetails = () => {\r\n  const [pet, setPet] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const fetchPetDetails = useCallback(async () => {\r\n    try {\r\n      const { data } = await pets.getOne(id);\r\n      setPet(data);\r\n    } catch (error) {\r\n      toast.error('Failed to fetch pet details');\r\n      navigate('/pets');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id, navigate]);\r\n\r\n  useEffect(() => {\r\n    fetchPetDetails();\r\n  }, [fetchPetDetails]);\r\n\r\n  const handleAdopt = async () => {\r\n    try {\r\n      await pets.update(id, { status: 'pending' });\r\n      toast.success('Adoption request sent!');\r\n      fetchPetDetails();\r\n    } catch (error) {\r\n      toast.error('Failed to send adoption request');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Typography>Loading...</Typography>;\r\n  }\r\n\r\n  if (!pet) {\r\n    return <Typography>Pet not found</Typography>;\r\n  }\r\n\r\n  const statusColor = {\r\n    available: 'success',\r\n    pending: 'warning',\r\n    adopted: 'error',\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12} md={6}>\r\n          <Card>\r\n            <CardMedia\r\n              component=\"img\"\r\n              height=\"400\"\r\n              image={pet.imageUrl}\r\n              alt={pet.name}\r\n              sx={{ objectFit: 'cover' }}\r\n            />\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <Paper sx={{ p: 3 }}>\r\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n              <Typography variant=\"h4\" component=\"h1\">\r\n                {pet.name}\r\n              </Typography>\r\n              <Chip\r\n                label={pet.status.charAt(0).toUpperCase() + pet.status.slice(1)}\r\n                color={statusColor[pet.status]}\r\n              />\r\n            </Box>\r\n            <Divider sx={{ my: 2 }} />\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n                  <PetsIcon sx={{ mr: 1 }} color=\"primary\" />\r\n                  <Typography variant=\"h6\">\r\n                    {pet.breed} â€¢ {pet.type.charAt(0).toUpperCase() + pet.type.slice(1)}\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n                  <CalendarTodayIcon sx={{ mr: 1 }} color=\"primary\" />\r\n                  <Typography variant=\"h6\">{pet.age} years old</Typography>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n            <Typography variant=\"body1\" sx={{ mt: 3, mb: 3 }}>\r\n              {pet.description}\r\n            </Typography>\r\n            <Divider sx={{ my: 2 }} />\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Contact Information\r\n            </Typography>\r\n            <Box sx={{ bgcolor: 'background.default', p: 2, borderRadius: 1 }}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n                <PersonIcon sx={{ mr: 1 }} color=\"primary\" />\r\n                <Typography>Posted by: {pet.owner.username}</Typography>\r\n              </Box>\r\n              <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                <EmailIcon sx={{ mr: 1 }} color=\"primary\" />\r\n                <Typography>Contact: {pet.owner.email}</Typography>\r\n              </Box>\r\n            </Box>\r\n            {user && pet.status === 'available' && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                fullWidth\r\n                size=\"large\"\r\n                sx={{ mt: 3 }}\r\n                onClick={handleAdopt}\r\n              >\r\n                Request to Adopt\r\n              </Button>\r\n            )}\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PetDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}